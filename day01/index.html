<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>DAY01 lista n√©zet</title>

  <link rel="stylesheet" href="../assets/css/style.css">

  <style>
    body.day01 {
      background: url("images/Kismarton.jpg") center / cover no-repeat fixed;
    }
  </style>
</head>

<body class="day01">
<div class="page">

  <!-- TOPBAR -->
  <div class="topbar">
    <div class="inner">
      <div class="brand">
        <div class="title">K√©k Duna t√∫ra</div>
        <div class="subtitle">DAY01 lista n√©zet</div>
      </div>
      <div class="btnrow">
        <a class="btn" href="../index.html">üè† F≈ëoldal</a>
        <button class="btn btn-accent" id="btnNearest">üìå Legk√∂zelebbi pont</button>
      </div>
    </div>
  </div>

  <!-- CONTENT -->
  <div class="container">

    <div class="card">
      <div class="h1">DAY01 ‚Äì Fert≈ë t√≥ √©s Wachau</div>
      <div class="small">
        A m√©r√©s automatikusan t√∂rt√©nik.  
        A rendszer d√∂nti el, melyik pont k√∂vetkezik.
      </div>
    </div>

    <div style="height:14px"></div>

    <div class="grid" id="poiList">

      <!-- P1 -->
      <div class="poi" id="p1">
        <div class="poi-head">
          <div>
            <div class="poi-title">1. Fert≈ë-t√≥ keleti t√©rs√©g</div>
            <div class="coords">47.660292, 16.643593</div>
          </div>
          <div class="badges">
            <span class="badge"><span class="dot warn"></span><span data-dist="p1">t√°vols√°g: ‚Äî</span></span>
          </div>
        </div>
        <div class="p">
          A Fert≈ë-t√≥ Eur√≥pa egyik legnyugatibb sztyepptava, UNESCO vil√°g√∂r√∂ks√©g.
        </div>
      </div>

      <!-- P2 -->
      <div class="poi" id="p2">
        <div class="poi-head">
          <div>
            <div class="poi-title">2. Eisenstadt ‚Äì Kismarton</div>
            <div class="coords">47.845947, 16.519620</div>
          </div>
          <div class="badges">
            <span class="badge"><span class="dot warn"></span><span data-dist="p2">t√°vols√°g: ‚Äî</span></span>
          </div>
        </div>
        <div class="p">
          Esterh√°zy k√∂zpont, Haydn v√°rosa.
        </div>
      </div>

      <!-- P3 -->
      <div class="poi" id="p3">
        <div class="poi-head">
          <div>
            <div class="poi-title">3. Leithaprodersdorf ‚Äì v√°rfal rom</div>
            <div class="coords">47.947851, 16.409055</div>
          </div>
          <div class="badges">
            <span class="badge"><span class="dot warn"></span><span data-dist="p3">t√°vols√°g: ‚Äî</span></span>
          </div>
        </div>
        <div class="p">
          Hat√°rv√©delmi k√∂z√©pkori rom.
        </div>
      </div>

      <!-- P4 -->
      <div class="poi" id="p4">
        <div class="poi-head">
          <div>
            <div class="poi-title">4. Krems an der Donau</div>
            <div class="coords">48.410091, 15.599190</div>
          </div>
          <div class="badges">
            <span class="badge"><span class="dot warn"></span><span data-dist="p4">t√°vols√°g: ‚Äî</span></span>
          </div>
        </div>
        <div class="p">
          Wachau kapuja, UNESCO ter√ºlet.
        </div>
      </div>

      <!-- P5 -->
      <div class="poi" id="p5">
        <div class="poi-head">
          <div>
            <div class="poi-title">5. D√ºrnstein ‚Äì k√©k templom</div>
            <div class="coords">48.395521, 15.520062</div>
          </div>
          <div class="badges">
            <span class="badge"><span class="dot warn"></span><span data-dist="p5">t√°vols√°g: ‚Äî</span></span>
          </div>
        </div>
        <div class="p">
          Csak elhalad√°s, ikonikus l√°tv√°ny.
        </div>
      </div>

      <!-- P6 -->
      <div class="poi" id="p6">
        <div class="poi-head">
          <div>
            <div class="poi-title">6. Wachau Camping Rossatz</div>
            <div class="coords">48.389414, 15.516214</div>
          </div>
          <div class="badges">
            <span class="badge"><span class="dot warn"></span><span data-dist="p6">t√°vols√°g: ‚Äî</span></span>
          </div>
        </div>
        <div class="p">
          Napi v√©gpont, Duna-parti kemping.
        </div>
      </div>

    </div>
  </div>
</div>

<script>
const POIS = [
  {id:"p1",lat:47.660292,lon:16.643593},
  {id:"p2",lat:47.845947,lon:16.519620},
  {id:"p3",lat:47.947851,lon:16.409055},
  {id:"p4",lat:48.410091,lon:15.599190},
  {id:"p5",lat:48.395521,lon:15.520062},
  {id:"p6",lat:48.389414,lon:15.516214}
];

function dist(a,b,c,d){
  const R=6371;
  const dLat=(c-a)*Math.PI/180;
  const dLon=(d-b)*Math.PI/180;
  const x=Math.sin(dLat/2)**2+
    Math.cos(a*Math.PI/180)*Math.cos(c*Math.PI/180)*Math.sin(dLon/2)**2;
  return R*2*Math.atan2(Math.sqrt(x),Math.sqrt(1-x));
}

function updateDistances(pos){
  let nearest=null;

  POIS.forEach(p=>{
    const d=dist(pos.lat,pos.lon,p.lat,p.lon);
    document.querySelector(`[data-dist="${p.id}"]`).textContent =
      `t√°vols√°g: ${d.toFixed(2)} km`;

    if(!nearest||d<nearest.d) nearest={id:p.id,d};
  });

  document.getElementById(nearest.id)
    .scrollIntoView({behavior:"smooth",block:"center"});
}

function measure(){
  navigator.geolocation.getCurrentPosition(p=>{
    updateDistances({lat:p.coords.latitude,lon:p.coords.longitude});
  });
}

measure();
setTimeout(measure,5000);

document.getElementById("btnNearest").onclick=measure;
</script>

</body>
</html>
