<!DOCTYPE html>
<html lang="hu">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>DAY06 12. Schwyz (kantonsz√©khely)</title>

    <link rel="stylesheet" href="../assets/css/style.css">

    <!-- Leaflet -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <!-- H√°tt√©rk√©p ugyanaz, mint a hero image -->
    <style>
        body {
            background: url("images/DAY06_12_Schwyz__Camping_International_Lido_Luzern.jpg") center / cover no-repeat fixed;
        }

        /* t√©rk√©p ‚Äì legalul */
        #map {
            width: 100%;
            height: 320px;
            margin-top: 18px;
            border-radius: 8px;
            border: 1px solid #333;
        }

        /* ACTION BUTTONS: F≈ëoldal k√ºl√∂n sor */
        .poibtns.poibtns-split {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .poibtns.poibtns-split .poibtns-row {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
        }
    </style>
</head>

<body>
    <div class="page">

        <!-- TOPBAR -->
        <div class="topbar">
            <div class="inner">
                <div class="brand">
                    <div class="title">K√©k Duna t√∫ra</div>
                    <div class="subtitle">DAY06 12. Schwyz (kantonsz√©khely)</div>
                </div>
                <div class="btnrow">
                    <a class="btn" href="../index.html">üè† F≈ëoldal</a>
                    <a class="btn" href="index.html">üìã Lista n√©zet</a>
                </div>
            </div>
        </div>

        <!-- CONTENT -->
        <div class="container">
            <div class="card">

                <div class="h1">12. Schwyz (kantonsz√©khely)</div>
                <div class="small">47.02109243887614, 8.654109584854064</div>

                <!-- HERO IMAGE -->
                <img class="hero-image" src="images/DAY06_12_Schwyz__Camping_International_Lido_Luzern.jpg" alt="Schwyz (kantonsz√©khely)">

<div class="p">
                    <b>Eredeti le√≠r√°s:</b> Schwyz a Sv√°jci Konf√∂der√°ci√≥ ‚Äûsz√ºl≈ëhaz√°ja‚Äù, innen ered az orsz√°g neve is.
                </div>

                <div class="p">
                    <b>√ârdekess√©gek:</b> A v√°ros t√∂rt√©nete szorosan kapcsol√≥dik az 1291-es alap√≠t√≥ hagyom√°nyhoz; a k√∂rny√©k tele van korai konf√∂der√°ci√≥s eml√©khelyekkel. Itt tal√°lhat√≥ a ‚ÄûSwiss Knife Valley‚Äù hagyom√°nyvil√°ga is, a r√©gi√≥ a Victorinox kultusza miatt vil√°gszerte ismert. A Mythen-hegyek jellegzetes sziklapiramisaival Schwyz f√∂l√∂tt m√°r alpesi karaktert kap a t√°j.
                </div>

                <!-- ACTION BUTTONS -->
                <div class="poibtns poibtns-split">
                    <div class="poibtns-row">
                        <a class="btn btn-blue" href="https://maps.app.goo.gl/DohkxrN9ifHKDXBe6" target="_blank" rel="noopener">üß≠ Navig√°ci√≥</a>
                        <a class="btn btn-accent" href="index.html">üìã Lista n√©zet</a>
                    </div>
                    <div class="poibtns-row">
                        <a class="btn" href="../index.html">üè† F≈ëoldal</a>
                    </div>
                </div>

                <!-- MAP ‚Äì LEGALUL -->
                <div id="map"></div>

            </div>
        </div>

    </div>

    <script>
        /* ===== POI ===== */
        const POI = {
            name: "Schwyz (kantonsz√©khely)",
            lat: 47.02109243887614,
            lon: 8.654109584854064
        };

        /* ===== MAP INIT ===== */
        const map = L.map("map").setView([POI.lat, POI.lon], 14);

        L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
            maxZoom: 19,
            attribution: "¬© OpenStreetMap"
        }).addTo(map);

        /* ===== POI MARKER ===== */
        L.marker([POI.lat, POI.lon])
            .addTo(map)
            .bindPopup(`<b>${POI.name}</b>`);

        /* ===== USER POSITION ‚Äì PIROS ===== */
        let userMarker = null;

        const userIconRed = L.icon({
            iconUrl: "https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-red.png",
            shadowUrl: "https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png",
            iconSize: [25, 41],
            iconAnchor: [12, 41]
        });

        if (navigator.geolocation) {
            navigator.geolocation.watchPosition(
                pos => {
                    const lat = pos.coords.latitude;
                    const lon = pos.coords.longitude;

                    if (!userMarker) {
                        userMarker = L.marker([lat, lon], { icon: userIconRed })
                            .addTo(map)
                            .bindPopup("üìç Itt vagy most");
                    } else {
                        userMarker.setLatLng([lat, lon]);
                    }
                },
                err => console.log("GPS hiba:", err),
                { enableHighAccuracy: true }
            );
        }
    </script>


    <script>
        /* ===== IMAGE FIX (AUTO FALLBACK) =====
           Ha a hero / h√°tt√©r k√©p f√°jlneve elt√©r (kis/nagybet≈±, .JPG, dupla al√°h√∫z√°s),
           akkor t√∂bb tipikus vari√°nst is megpr√≥b√°lunk. Amelyik l√©tezik, azt be√°ll√≠tjuk.
        */
        (function () {
            const hero = document.querySelector("img.hero-image");
            if (!hero) return;

            const srcAttr = hero.getAttribute("src") || "";
            const srcFile = srcAttr.replace(/^images\//i, "");

            // background-image kinyer√©se
            const bgCss = (getComputedStyle(document.body).backgroundImage || "");
            const m = bgCss.match(/url\(["']?(.+?)["']?\)/i);
            let bgFile = m && m[1] ? m[1] : "";
            bgFile = bgFile.replace(/^.*\/images\//i, "").replace(/^images\//i, "");

            const cand = [];
            const add = (x) => { if (x && !cand.includes(x)) cand.push(x); };

            // alap: amit a f√°jlban m√°r hivatkozol
            add(srcFile);
            add(bgFile);

            // tipikus vari√°ci√≥k az alapf√°jlokb√≥l
            const bases = [srcFile, bgFile].filter(Boolean);
            const exts = [".jpg", ".JPG", ".jpeg", ".JPEG", ".png", ".PNG", ".webp", ".WEBP"];

            bases.forEach(f => {
                const noExt = f.replace(/\.[^.]+$/i, "");
                exts.forEach(e => add(noExt + e));

                // dupla al√°h√∫z√°s / egyszeres
                add(f.replace(/__/g, "_"));
                add(f.replace(/_/g, "__"));

                // URL-encode jelleg≈± esetek
                add(f.replace(/%20/g, "_"));
            });

            // HTML f√°jln√©vb≈ël is k√©pz√ºnk jel√∂lteket (day06_09_xxx -> DAY06_09_xxx.jpg)
            const htmlName = (location.pathname.split("/").pop() || "").replace(/\.html$/i, "");
            const dayMatch = (srcFile.match(/^(DAY\d+_\d+)/i) || htmlName.match(/^(day\d+_\d+)/i));
            const dayPrefix = dayMatch ? dayMatch[1] : "";
            const dayPrefixUpper = dayPrefix ? dayPrefix.toUpperCase() : "";

            if (dayPrefixUpper) {
                exts.forEach(e => add(dayPrefixUpper + e));

                const rest = htmlName.replace(/^day\d+_\d+_?/i, "");
                if (rest) {
                    const dn = (dayPrefixUpper + "_" + rest).replace(/[^\w]+/g, "_");
                    exts.forEach(e => add(dn + e));
                }
            } else if (htmlName) {
                const dn = htmlName.replace(/[^\w]+/g, "_");
                exts.forEach(e => add(dn + e));
            }

            function apply(file) {
                hero.src = "images/" + file;
                document.body.style.backgroundImage = 'url("images/' + file + '")';
            }

            function tryNext(i) {
                if (i >= cand.length) return;
                const file = cand[i];
                const img = new Image();
                img.onload = () => apply(file);
                img.onerror = () => tryNext(i + 1);
                img.src = "images/" + file;
            }

            tryNext(0);
        })();
    </script>

</body>

</html>
